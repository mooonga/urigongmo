{% extends 'base_mypage.html' %}
{% load static %}

{% block tab_content %}
<div class="content-card">
  <h2 class="card-title">프로필 수정</h2>
  <form method="post" class="form">
    {% csrf_token %}

    {% if form %}
      <div class="form-group">
        <label for="{{ form.nickname.id_for_label }}">닉네임</label>
        {{ form.nickname }}
      </div>

      <div class="form-group">
        <label for="{{ form.age.id_for_label }}">나이</label>
        {{ form.age }}
      </div>

      <div class="form-group">
        <label for="{{ form.region.id_for_label }}">거주지</label>
        {{ form.region }}
      </div>

      <div class="form-group">
        <label for="{{ form.bio.id_for_label }}">소개</label>
        {{ form.bio }}
      </div>

      <div class="form-group">
        <label>관심사</label>
        <div class="tag-checkboxes">
          {% for value, label in form.fields.interests.choices %}
            {% with field_id="id_interests_"|add:value %}
              <label class="tag-button">
                <input type="checkbox"
                      name="interests"
                      id="{{ field_id }}"
                      value="{{ value }}"
                      {% if value in form.initial.interests %}checked{% endif %}>
                <span>{{ label }}</span>
              </label>
            {% endwith %}
          {% endfor %}
        </div>
      </div>
    {% endif %}

    {% if business_form %}
      <hr style="margin: 24px 0;">
      <h3 style="margin-bottom: 12px;">사업자 정보</h3>

      <div class="form-group">
        <label for="{{ business_form.company_name.id_for_label }}">회사 이름</label>
        {{ business_form.company_name }}
      </div>

      <div class="form-group">
        <label for="{{ business_form.business_type.id_for_label }}">업종</label>
        {{ business_form.business_type }}
      </div>

      <div class="form-group">
        <label for="{{ business_form.phone_number.id_for_label }}">전화번호</label>
        {{ business_form.phone_number }}
      </div>

      <div class="form-group">
        <label for="{{ business_form.contact_email.id_for_label }}">이메일</label>
        {{ business_form.contact_email }}
      </div>

      <div class="form-group">
        <label>승인 상태</label>
        <span style="font-weight: bold;">{{ business_form.instance.approval_status }}</span>
      </div>
    {% endif %}

    <button type="submit" class="btn submit-btn">저장하기</button>
  </form>
</div>

<style>
  .form-group {
    margin-bottom: 16px;
    display: flex;
    flex-direction: column;
  }

  .tag-checkboxes {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 8px;
  }

  .tag-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 8px 14px;
    border-radius: 20px;
    font-size: 14px;
    cursor: pointer;
    background-color: #f1f1f1;
    color: #333;
    transition: all 0.3s;
    border: none;
  }

  .tag-button input[type="checkbox"] {
    display: none;
  }

  .tag-button input[type="checkbox"]:checked + span {
    background-color: #2563eb;
    color: #fff;
    border-radius: 20px;
    padding: 4px 10px;
  }

  .tag-button span {
    padding: 4px 10px;
  }

  .btn.submit-btn {
    margin-top: 20px;
    padding: 10px 16px;
    background-color: #2563eb;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }
</style>
{% endblock %}