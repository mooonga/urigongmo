{# poster/templates/poster/detail.html #}
{% extends 'base.html' %}  {# 공통 베이스 레이아웃 확장 :contentReference[oaicite:3]{index=3} #}
{% load static %}

{% block title %}{{ poster.title }} – urigongmo{% endblock %}

{% block content %}

<main class="detail-page">
  <div class="detail-container">

    <!-- 뒤로 가기 -->
    <p class="back-link">
      <a href="{% url 'poster:poster_ongoing' %}">
        <img src="{% static 'img/icons/left_arrow.svg' %}" alt="뒤로" /> 목록으로 돌아가기
      </a>
    </p>
    
    <!-- 제목 -->
    <h1 class="section-title detail-title">{{ poster.title }}</h1>

    <!-- 포스터 및 주요 정보 -->
    <div class="detail-main-info">
      <figure class="poster-figure">
        {% if poster.image %}
          <img src="{{ poster.image.url }}" alt="{{ poster.title }}" class="contest-image" />
        {% else %}
          <img src="{% static 'img/posterPlaceholder.jpg' %}" class="contest-image" alt="포스터 없음" />
        {% endif %}
      </figure>
      <dl class="detail-dl">
        <dt>디데이</dt>
        <dd class="highlight">{{ poster.d_day }}</dd>

        <dt>주최</dt>
        <dd>{{ poster.organization }}</dd>

        <dt>기업 형태</dt>
        <dd>{{ poster.company_type }}</dd>

        <dt>참여 대상</dt>
        <dd>{{ poster.target }}</dd>

        <dt>시상 규모</dt>
        <dd>{{ poster.prize }}</dd>

        <dt>공모 분야</dt>
        <dd style="font-family: Arial, sans-serif !important; color: black !important;">
          {{ poster.category }}
        </dd>

        <dt>활동 혜택</dt>
        <dd>{{ poster.benefits }}</dd>

        <dt>추가 혜택</dt>
        <dd>{{ poster.extra }}</dd>

        <dt>홈페이지</dt>
        <dd>
          {% if poster.website %}
            <a href="{{ poster.website }}" target="_blank">{{ poster.website }}</a>
          {% else %}
            –
          {% endif %}
        </dd>

        <dt>접수 기간</dt>
        <dd>{{ poster.start_date }} — {{ poster.end_date }}</dd>

        <dt>조회수</dt>
        <dd>{{ poster.views }}회</dd>
        <!-- 스크랩 (마지막 줄) -->
<dt><button
    class="scrap-btn"
    type="button"
    aria-label="스크랩"
    aria-pressed="{% if poster.is_scrapped %}true{% else %}false{% endif %}"
    data-scrap-on="{% static 'img/icons/scrapped.svg' %}"
    data-scrap-off="{% static 'img/icons/scrap.svg' %}">
    <img
      src="{% if poster.is_scrapped %}{% static 'img/icons/scrapped.svg' %}{% else %}{% static 'img/icons/scrap.svg' %}{% endif %}"
      alt="스크랩" />
  </button></dt>
<dd>

</dd>

      </dl>
    </div>

    <!-- 탭 메뉴 -->
    <nav class="detail-tabs">
      <a href="#info" class="tab-link active">상세 정보</a>
      <a href="#recruit" class="tab-link">팀원 모집</a>
      <a href="#review" class="tab-link">합격 후기</a>
      <a href="#qa" class="tab-link">Q&amp;A</a>
    </nav>

    <!-- 탭 콘텐츠 -->
    <section id="info" class="tab-content active">
      <div class="placeholder-box">
        {{ poster.description|linebreaks }}
      </div>
    </section>
    <section id="recruit" class="tab-content">
      <!-- 팀원 모집 컨텐츠 -->
    </section>
    <section id="review" class="tab-content">
      <!-- 합격 후기 컨텐츠 -->
    </section>
    <section id="qa" class="tab-content">
      <!-- Q&A 컨텐츠 -->
    </section>

  </div>
</main>

<script>
document.addEventListener('DOMContentLoaded', function () {
  document.querySelectorAll('.scrap-btn').forEach((btn) => {
    const img = btn.querySelector('img');
    const on  = btn.dataset.scrapOn;
    const off = btn.dataset.scrapOff;

    btn.addEventListener('click', () => {
      const isOn = btn.getAttribute('aria-pressed') === 'true';
      btn.setAttribute('aria-pressed', isOn ? 'false' : 'true');
      img.src = isOn ? off : on;
      // TODO: fetch로 서버 반영
    });
  });
});
</script>

{% endblock %}
